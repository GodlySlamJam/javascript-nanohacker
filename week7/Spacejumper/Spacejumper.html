<!DOCTYPE html>
<html>
  <head>
    <script src="https://rawgithub.com/craftyjs/Crafty/release/dist/crafty-min.js"></script>
    <style>
    #Stage{
      height: 1000px;
      width:500px;
    }
    </style>
  </head>
  <body>

    <script>
    function collision() {

if(x === 0){
  alert("You did it");
  x++;
  location.reload();
}

}
function lose(){
  if(y === 0){
  alert("You lose")
  location.reload();
  y++;
}
}
var y = 0
var x = 0
    function start(){
      Crafty.init();

      Crafty.defineScene("First", function(){

    var player = Crafty.e("2D, DOM, Color, Twoway, Gravity, Platform, Collision, Solid, Player")

    var platform = Crafty.e("2D, DOM, Color, Collision, Solid, Platform")
    var platform1 = Crafty.e("2D, DOM, Color, Collision, Solid, Platform")
    var platform2 = Crafty.e("2D, DOM, Color, Collision, Solid, Platform")
    var platform3 = Crafty.e("2D, DOM, Color, Collision, Solid, Platform")
    var platform4 = Crafty.e("2D, DOM, Color, Collision, Solid, Platform")

    var platformf1 = Crafty.e("2D, DOM, Color, Collision, Solid")
    var platformf2 = Crafty.e("2D, DOM, Color, Collision, Solid")
    var platformf3 = Crafty.e("2D, DOM, Color, Collision, Solid")

    var goal = Crafty.e("2D, DOM, Color, Collision, Solid")
    var fall = Crafty.e("2D, DOM, Color, Collision, Solid")


    platform.attr({x:0, y:650, w:200, h:10,});
    platform.color("Red");

    platformf1.attr({x:400, y:600, w:200, h:10,});
    platformf1.color("Red");

    platform1.attr({x:950, y:580, w:100, h:10,});
    platform1.color("Red");

    platform2.attr({x:400, y:427, w:200, h:10,});
    platform2.color("Red");

    platformf2.attr({x:800, y:300, w:200, h:10,});
    platformf2.color("Red");

    platformf3.attr({x:0, y:400, w:200, h:10,});
    platformf3.color("Red");

    platform4.attr({x:1200, y:330, w:200, h:10,});
    platform4.color("Red");




    player.attr({x:0, y:500, w:50, h:50,});
    player.color("Green");
    player.twoway(600, 300);
    player.gravity("Platform");
    player.image("Super-Mario.png");

    goal.attr({x:800, y:170, w:50, h:50,});
    goal.color("Green");
    goal.onHit("Player", collision);

    fall.attr({x:0, y:700, w:1400, h:10,});
    fall.color("Green");
    fall.onHit("Player", lose);

    player.bind("LandedOnGround", function(platform) {
  if (platform === platform4) {
    player.twoway(1000, 1000);
  }
});

});

  Crafty.defineScene("Second", function(){

    var player = Crafty.e("2D, DOM, Color, Image, Gravity, Twoway, Platform, Collision, Solid, Player")

    var platform = Crafty.e("2D, DOM, Color, Collision, Solid, Platform")
    var platform1 = Crafty.e("2D, DOM, Color, Collision, Solid, Platform")
    var platform2 = Crafty.e("2D, DOM, Color, Collision, Solid, Platform")
    var platform3 = Crafty.e("2D, DOM, Color, Collision, Solid, Platform")
    var platform4 = Crafty.e("2D, DOM, Color, Collision, Solid, Platform")
    var platform5 = Crafty.e("2D, DOM, Color, Collision, Solid, Platform")

    Crafty.audio.add("ow", "hadouken.mp3")


    platform.color("Blue")
    platform.attr({x:0, y:700, h:10, w:100})
platform.onHit("Player", Why)

    platform1.color("Blue")
    platform1.attr({x:200, y:100, h:10, w:100})
platform1.onHit("Player", Why)

    platform2.color("Blue")
    platform2.attr({x:400, y:1000, h:10, w:100})
platform2.onHit("Player", Why)

    platform3.color("Blue")
    platform3.attr({x:600, y:1000, h:10, w:100})
platform3.onHit("Player", Why)

    platform4.color("Blue")
    platform4.attr({x:800, y:200, h:10, w:100})
platform4.onHit("Player", Why)

    platform5.color("Blue")
    platform5.attr({x:1000, y:1000, h:10, w:100})
platform5.onHit("Player", Why)


    player.attr({y:700, x:00, h:70, w:70})
    player.twoway(600, 700);
    player.gravity("Platform");
    player.image("Super-Mario.png");



  player.bind("LandedOnGround", function Why(){
    if(!Crafty.audio.isPlaying("ow")){
      Crafty.audio.play("ow")
    }
});






//Crafty.viewport.follow("Player", 0, 0);
Crafty.viewport.zoom(500)
  });



Crafty.enterScene("Second")
}
window.onload = start;
    </script>
  </body>
</html>
